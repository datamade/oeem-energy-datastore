sudo: required

language: python

services:
  - docker
  - postgresql

addons:
  postgresql: "9.3"

before_script:
  - psql -c 'create database travis_ci_test;' -U postgres

before_install:
  - docker build -t impactlab/oeem-energy-datastore .
  - docker ps -a
  - docker run impactlab/oeem-energy-datastore -c "cd /code; source env.sh; python manage.py test"

script:
  - python manage.py test

